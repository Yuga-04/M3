## **Lex Program for SQL Keyword Recognition**

### **Question Recap**

In SQL, **keywords and identifiers are case-insensitive**.
We need a **Lex (Lexical Analyzer) program** that recognizes:

* **Keywords:** `SELECT`, `FROM`, `WHERE` (in any combination of upper/lower case).
* **Identifiers (ID):** Any sequence of **letters and digits**, **starting with a letter**.

---

## **1️⃣ Concept Explanation**

Lex is a **lexical analyzer generator** that converts a set of patterns (regular expressions) into a program that recognizes them.

It divides its program into **three sections**:

```
%{
Declarations
%}
%%
Rules section
%%
User-defined functions (optional)
```

---

## **2️⃣ Logic and Pattern Rules**

* **Case insensitivity** is handled using `[Ss][Ee][Ll][Ee][Cc][Tt]` — this matches all forms like “select”, “SELECT”, or “SeLeCt”.
* **Identifiers (ID):** Start with a **letter**, followed by any combination of **letters or digits** → `[a-zA-Z][a-zA-Z0-9]*`.

---

## **3️⃣ Lex Program**

```lex
%{
#include <stdio.h>
%}

%%
[Ss][Ee][Ll][Ee][Cc][Tt]     { printf("SELECT keyword\n"); }
[Ff][Rr][Oo][Mm]             { printf("FROM keyword\n"); }
[Ww][Hh][Ee][Rr][Ee]         { printf("WHERE keyword\n"); }
[a-zA-Z][a-zA-Z0-9]*         { printf("IDENTIFIER: %s\n", yytext); }
[\n\t ]+                     { /* Ignore whitespace */ }
.                            { printf("UNKNOWN TOKEN: %s\n", yytext); }
%%

int main() {
    yylex();   // Start lexical analysis
    return 0;
}
```

---

## **4️⃣ Explanation of Each Part**

| **Component**              | **Purpose**                                           |
| -------------------------- | ----------------------------------------------------- |
| `%{ %}`                    | Used to include C declarations (like header files).   |
| `%%`                       | Separates sections of Lex code.                       |
| `[Ss][Ee][Ll][Ee][Cc][Tt]` | Matches `SELECT` in any case.                         |
| `[a-zA-Z][a-zA-Z0-9]*`     | Recognizes identifiers (e.g., column names).          |
| `yytext`                   | Stores the actual matched text.                       |
| `yylex()`                  | Function automatically generated by Lex for scanning. |

---

## **5️⃣ Sample Input / Output**

**Input:**

```
SELECT name FROM student WHERE age > 20
```

**Output:**

```
SELECT keyword
IDENTIFIER: name
FROM keyword
IDENTIFIER: student
WHERE keyword
IDENTIFIER: age
UNKNOWN TOKEN: >
IDENTIFIER: 20
```

---

## **6️⃣ How the Lex Program Works**

1. The **scanner** generated by Lex reads input character by character.
2. It matches the longest possible pattern defined in the rules section.
3. For each match, it executes the corresponding **action** (here, printing tokens).
4. Whitespace is ignored, and unrecognized tokens are flagged.

---

## **7️⃣ Advantages of Lex**

* Automates the process of **token recognition**.
* Handles **case-insensitive** inputs easily using bracket expressions.
* Works efficiently with **parsers (YACC)** for SQL-like language analysis.

